(function(e){function n(n){for(var i,o,s=n[0],c=n[1],d=n[2],u=0,h=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&h.push(r[o][0]),r[o]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);l&&l(n);while(h.length)h.shift()();return a.push.apply(a,d||[]),t()}function t(){for(var e,n=0;n<a.length;n++){for(var t=a[n],i=!0,s=1;s<t.length;s++){var c=t[s];0!==r[c]&&(i=!1)}i&&(a.splice(n--,1),e=o(o.s=t[0]))}return e}var i={},r={app:0},a=[];function o(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=e,o.c=i,o.d=function(e,n,t){o.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,n){if(1&n&&(e=o(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(o.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)o.d(t,i,function(n){return e[n]}.bind(null,i));return t},o.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(n,"a",n),n},o.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},o.p="";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],c=s.push.bind(s);s.push=n,s=s.slice();for(var d=0;d<s.length;d++)n(s[d]);var l=c;a.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";var i=t("64a9"),r=t.n(i);r.a},"0a43":function(e,n,t){},1:function(e,n){},2:function(e,n){},"2cf4":function(e,n,t){"use strict";var i=t("a0a6"),r=t.n(i);r.a},3:function(e,n){},4:function(e,n){},4359:function(e,n,t){},"520f":function(e,n,t){"use strict";var i=t("0a43"),r=t.n(i);r.a},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("f751"),t("097d");var i=t("2b0e"),r=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("ThreejsWorld",{attrs:{msg:"Test"}})],1)},a=[],o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"hello"},[100!==e.per?t("Loader",{attrs:{per:e.per}}):e._e(),t("div",{attrs:{id:"canvas-element"}}),!1===e.webcamAllowed?t("ErrorMessage"):e._e(),!0===e.touchFlag?t("Award"):e._e()],1)},s=[],c=(t("7f7f"),t("ac6a"),t("5a89")),d=t("dcdc"),l=(t("4721"),t("34ad")),u=t("0ca5"),h=t("3191"),f=t.n(h),p=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"loader-wrapper"},[t("h1",[e._v("Loading"),t("br"),e._v(e._s(e.per+"%"))])])},m=[],v=(t("c5f6"),{name:"Loader",props:{per:{type:Number,default:0}}}),w=v,g=(t("9bee"),t("2877")),b=Object(g["a"])(w,p,m,!1,null,"d1ed15da",null),y=b.exports,_=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},x=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"error-wrapper"},[t("h1",[e._v("WebRTC issue!")]),t("h3",[e._v("Open camera page on your phone with one of the browsers listed below.")]),t("h5",[e._v("Camera Page:")]),t("ul",[t("li",[e._v("iOS Safari 11+")]),t("li",[e._v("Android Browser 56+")]),t("li",[e._v("Chrome for Android 61+")])])])}],E={name:"ErrorMessage"},A=E,P=(t("83c1"),Object(g["a"])(A,_,x,!1,null,"16902140",null)),M=P.exports,T=function(){var e=this,n=e.$createElement;e._self._c;return e._m(0)},j=[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"award-wrapper"},[t("h1",[e._v("！！！Award！！！")])])}],O={name:"Award"},R=O,S=(t("520f"),Object(g["a"])(R,T,j,!1,null,"3e9bd704",null)),C=S.exports,L={name:"ThreejsWorld",props:{msg:String},components:{Loader:y,ErrorMessage:M,Award:C},created:function(){},data:function(){return{per:0,webcamAllowed:!0,scene:"",renderer:"",light:"",camera:"",controls:"",publicPath:"",threeAssets:[],onRenderFcts:[],allMixers:[],mixer:"",raycaster:"",touchFlag:!1}},mounted:function(){var e=this;this.$nextTick(function(){e.checkAPI(),e.init(),e.initAR()})},methods:{checkAPI:function(){if(void 0===navigator.mediaDevices||void 0===navigator.mediaDevices.enumerateDevices||void 0===navigator.mediaDevices.getUserMedia){if(void 0===navigator.mediaDevices);else if(void 0===navigator.mediaDevices.enumerateDevices);else if(void 0===navigator.mediaDevices.getUserMedia);this.webcamAllowed=!0}},initAR:function(){var e=this,n=new d["THREEx"].ArToolkitSource({sourceType:"webcam"});function t(){this.webcamAllowed=!1}function i(){n.onResizeElement(),n.copyElementSizeTo(e.renderer.domElement),null!==r.arController&&n.copyElementSizeTo(r.arController.canvas)}n.init(function(){i()},t.bind(this)),window.addEventListener("resize",function(){i()});var r=new d["THREEx"].ArToolkitContext({debug:!0,cameraParametersUrl:d["THREEx"].ArToolkitContext.baseURL+"../data/data/camera_para.dat",detectionMode:"mono",maxDetectionRate:30});r.init(function(){e.camera.projectionMatrix.copy(r.getProjectionMatrix())});this.onRenderFcts.push(function(t){!1!==n.ready&&(r.update(n.domElement),e.scene.visible=e.camera.visible)});new d["THREEx"].ArMarkerControls(r,e.camera,{type:"pattern",patternUrl:"".concat(this.publicPath,"pattern/pattern-logo3.patt"),changeMatrixMode:"cameraTransformMatrix"})},init:function(){function e(e){requestAnimationFrame(this._animate),this.render(e)}var n=window.innerWidth,t=window.innerHeight;this.clock=new c["Clock"],this.scene=new c["Scene"],this.scene.add(new c["GridHelper"](1e3,100)),this.scene.add(new c["AxesHelper"](20)),this.renderer=new c["WebGLRenderer"]({antialias:!0,alpha:!0,preserveDrawingBuffer:!0}),this.renderer.physicallyCorrectLights=!0,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(n,t),document.getElementById("canvas-element").appendChild(this.renderer.domElement),this.stats=new f.a,document.getElementById("canvas-element").appendChild(this.stats.dom),this.camera=new c["PerspectiveCamera"],this.scene.add(this.camera),this.scene.visible=!1;var i=new c["HemisphereLight"];this.scene.add(i);var r=new c["AmbientLight"](16777215,.5);this.camera.add(r);var a=new c["DirectionalLight"](16777215,1.5*Math.PI);a.position.set(.5,0,.866),this.camera.add(a),this.loading(),this._animate=e.bind(this)},onWindowResize:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)},render:function(e){var n=this.clock.getDelta(),t=null;t=t||e-1e3/60;Math.min(200,e-t);t=e,this.onRenderFcts.forEach(function(e){e(n)}),this.renderer.render(this.scene,this.camera),this.stats.update()},addGlb:function(e){var n=this.threeAssets[e];console.log(n);var t=this.threeAssets[e].scene;this.scene.add(t);var i=c["sRGBEncoding"];t.traverse(function(e){if(e.isMesh){e.castShadow=!0;var n=e.material;n.map&&(n.map.encoding=i),n.emissiveMap&&(n.emissiveMap.encoding=i),(n.map||n.emissiveMap)&&(n.needsUpdate=!0)}}),t.position.z=2,t.position.y=-2,t.rotateX(-Math.PI/2);for(var r=n.animations,a=new c["AnimationMixer"](t),o=0;o<r.length;o++){var s=a.clipAction(r[o]);s.play()}return this.allMixers.push(a),t},addObj:function(){var e=this,n=this.addGlb("Soldier");console.log(n);var t=new c["Vector2"];this.raycaster=new c["Raycaster"],document.addEventListener("touchend",function(i){i.preventDefault(),t.x=i.changedTouches[0].pageX/window.innerWidth*2-1,t.y=-i.changedTouches[0].pageY/window.innerHeight*2+1,e.raycaster.setFromCamera(t,e.camera);var r=e.raycaster.intersectObjects(n.children[0].children);console.log("a"),r.length>0&&(console.log("b"),e.touchFlag=!0)},!1),this.onRenderFcts.push(function(n){for(var t=0;t<e.allMixers.length;t++){var i=e.allMixers[t];i.update(n)}}),this._animate()},loading:function(){var e=this,n=new c["LoadingManager"];n.onStart=function(e,n,t){},n.onLoad=function(){console.log("Loading complete!"),e.addObj()},n.onProgress=function(n,t,i){var r=parseInt(t/i*100);console.log(r),e.per=r},n.onError=function(e){console.log("There was an error loading "+e)};var t=new l["a"](n),i=new u["a"];i.setDecoderPath("".concat(this.publicPath,"libs/draco")),i.setDecoderConfig({type:"js"}),t.setDRACOLoader(i),t.load("".concat(this.publicPath,"model/Soldier.glb"),function(n){e.threeAssets["Soldier"]=n}),t.load("".concat(this.publicPath,"model/city.glb"),function(n){e.threeAssets["city"]=n}),t.load("".concat(this.publicPath,"model/Jumping.glb"),function(n){e.threeAssets["Jumping"]=n})}}},D=L,k=(t("2cf4"),Object(g["a"])(D,o,s,!1,null,"4a39788e",null)),H=k.exports,W={name:"app",components:{ThreejsWorld:H},mounted:function(){var e=this;this.$nextTick(function(){e.cssInit().eventInit()})},methods:{isPc:function(){for(var e=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),t=!0,i=0;i<n.length;i++)if(e.indexOf(n[i])>0){t=!1;break}return t},rootResize:function(){var e,n=document.documentElement.clientWidth||window.innerWidth,t=document.documentElement.clientHeight||window.innerHeight;e=n>t?t/750*100:n/750*100,document.getElementsByTagName("html")[0].style.fontSize=e+"px"},eventInit:function(){var e=this;return document.addEventListener("touchstart",function(e){},{passive:!1}),document.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),e},cssInit:function(){var e=this,n=100,t=1e3;return e.rootResize(),window.addEventListener("onorientationchange"in window?"orientationchange":"resize",function(){var i,r,a,o,s,c;a=function(){clearInterval(i),clearTimeout(r),i=null,r=null,e.rootResize()},i=setInterval(function(){window.innerWidth===o&&window.innerHeight===s?(c++,c===n&&a()):(o=window.innerWidth,s=window.innerHeight,c=0)}),r=setTimeout(function(){a()},t)}),e}}},z=W,I=(t("034f"),Object(g["a"])(z,r,a,!1,null,null,null)),$=I.exports;i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e($)}}).$mount("#app")},"64a9":function(e,n,t){},"83c1":function(e,n,t){"use strict";var i=t("4359"),r=t.n(i);r.a},"9bee":function(e,n,t){"use strict";var i=t("c661"),r=t.n(i);r.a},a0a6:function(e,n,t){},c661:function(e,n,t){}});
//# sourceMappingURL=app.4bc8e149.js.map